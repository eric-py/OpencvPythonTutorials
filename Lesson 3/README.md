## پیش‌نیازها

قبل از اجرای کدها، اطمینان حاصل کنید که کتابخانه‌های زیر نصب شده‌اند:

- OpenCV

می‌توانید با استفاده از دستور زیر آن‌ها را نصب کنید:
```bash
pip install opencv-python
```

### ۱. بارگذاری تصویر اصلی

```python
img = cv.imread('../src/color.jpg', cv.IMREAD_COLOR) # Original image
```

در این مرحله، تصویر اصلی به صورت رنگی از مسیر داده‌شده بارگذاری می‌شود. `cv.IMREAD_COLOR` تصویر را در حالت BGR (آبی، سبز، قرمز) بارگذاری می‌کند که حالت پیش‌فرض رنگی در OpenCV است.

### ۲. تبدیل تصویر رنگی به خاکستری

```python
img_gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY) # Convert original image to gray
```

با استفاده از `cv.cvtColor` تصویر به حالت خاکستری تبدیل می‌شود که برای بسیاری از عملیات پردازش تصویر (مانند تشخیص لبه‌ها) مفید است.

### ۳. تغییر رنگ ناحیه‌ای از تصویر

```python
img_change_color[50:250, 250:500] = [0,0,0] # Blackout the selected region
```

یک ناحیه از تصویر رنگی را به رنگ سیاه تغییر می‌دهیم. این کار برای مخفی کردن یا علامت‌گذاری بخش‌هایی از تصویر کاربرد دارد.

### ۴. برش یک ناحیه از تصویر خاکستری

```python
img_cut = img_gray[50:250, 250:500] # Create a cropped version of grayscale image
```

در این قسمت، بخشی از تصویر خاکستری اصلی برش داده می‌شود و در متغیر `img_cut` ذخیره می‌شود. این کار برای تمرکز روی یک ناحیه خاص از تصویر مفید است.

### ۵. کپی و چسباندن ناحیه‌ای از تصویر

```python
img[50:250, 250:500] = img[200:400, 450:700] # Copy a region from one area of the image to another area
```

یک ناحیه از تصویر را کپی کرده و در محل دیگری قرار می‌دهیم. این تکنیک برای تغییرات جزئی در تصویر یا ایجاد افکت‌های خاص مفید است.

### ۶. استخراج کانال‌های رنگی (BGR)

```python
b = img[:,:,0] # Get blue channel
g = img[:,:,1] # Get green channel
r = img[:,:,2] # Get red channel
```

در این قسمت، کانال‌های رنگی آبی، سبز و قرمز را از تصویر اصلی جدا می‌کنیم. همچنین می‌توان از `cv.split(img)` نیز برای انجام این کار استفاده کرد.

### ۷. ادغام کانال‌های رنگی

```python
img_merg = cv.merge((b, g, r)) # Merge color channels into BGR image
```

در اینجا، کانال‌های جداشده را دوباره به یک تصویر رنگی BGR ادغام می‌کنیم.

### ۸. نمایش تصاویر

در کد زیر، تصاویر مختلفی که در طی مراحل قبل ایجاد شده‌اند نمایش داده می‌شوند.

```python
cv.imshow('IMAGE', img)
cv.imshow('IMAGE GRAY', img_gray)
cv.imshow('IMAGE CUT', img_cut)
cv.imshow('IMAGE CHANGE COLOR', img_change_color)
cv.imshow('BLUE', b)
cv.imshow('GREEN', g)
cv.imshow('RED', r)
cv.imshow('MERGE COLOR', img_merg)
cv.waitKey(0)
cv.destroyAllWindows()
```

هر تصویر در یک پنجره جداگانه نمایش داده می‌شود. `cv.waitKey(0)` باعث می‌شود تا زمانی که یک کلید فشرده نشود پنجره‌ها باز بمانند و `cv.destroyAllWindows()` تمام پنجره‌ها را می‌بندد.

### ۹. دریافت اطلاعات تصویر

در این بخش، ابعاد تصویر، تعداد کل پیکسل‌ها و نوع داده‌ی پیکسل‌ها را می‌توان به‌دست آورد.

```python
img.shape # ابعاد تصویر (ارتفاع، عرض و کانال‌ها)
img.size # تعداد کل عناصر در تصویر (پیکسل‌ها ضرب‌در تعداد کانال‌ها)
img.dtype # نوع داده‌های تصویر (مانند uint8)
```

## نکات اضافی

- **مختصات ناحیه‌ها**: در OpenCV، مختصات به صورت `[y1:y2, x1:x2]` تعیین می‌شوند، که `y1:y2` محدوده در محور عمودی و `x1:x2` محدوده در محور افقی است.
- **مدل رنگی BGR**: توجه کنید که در OpenCV، ترتیب کانال‌های رنگی به صورت BGR (آبی، سبز، قرمز) است، در حالی که در بسیاری از کتابخانه‌های دیگر به صورت RGB (قرمز، سبز، آبی) است.
- **عملیات ماتریسی**: دسترسی به نواحی و کانال‌ها در تصویر، شباهت زیادی به کار با آرایه‌های `numpy` دارد که در این کدها به خوبی نمایش داده شده است.
